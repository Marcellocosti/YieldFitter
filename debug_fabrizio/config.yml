operations:
    preprocess_data: False
    make_yaml: False
    proj_data: False
    produce_corr_bkgs_templs: True
    get_raw_yields: True

outdir: '/home/mdicosta/YieldFitter/ppref/test'
suffix: 'test'
centrality: 'k0100'
Dmeson: 'Dplus'
nworkers: 1

ptbins: [
        #    1.0,
        #    1.5,
        #    2.0,
        #    2.5,
        #    3.0,
        #    3.5,
        #    4.0,
           5.0,
           6.0,
        #    7.0,
        #    8.0,
        #    10.0,
        #    12.0,
        #    16.0,
        #    24.0
       ]

cut_variation:
    bkg_max: [0.015] #, 0.015, 0.007, 0.01, 0.006, 0.006, 0.02]
    # bkg_max: [0.08, 0.004, 0.015, 0.015, 0.02, 0.02, 0.015, 0.015, 0.007, 0.01, 0.006, 0.006, 0.02, 0.02]
    sig: # the max value is not contained in the range
        # min: [0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.04, 0.04]
        min: [0.06] #, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06, 0.06]
        max: [1.0] #, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0]
        # max: [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.60, 0.60]
        step: [1.0] #, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0]
        # step: [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0]
    skip_cuts: [    # index of the specific cuts to skip for each pt bin
            [18,19,20,21,22,23,24,25], # pt 1
            [26], # pt 2
            [24,25,26], # pt 3
            [], # pt 4
            [], # pt 5
            [], # pt 6
            [], # pt 7
            [], # pt 8
            [], # pt 9
            [22,23,24,25,26], # pt 10
            [22,23,24,25,26], # pt 11
            [22,23,24,25,26], # pt 12
            [21,22,23,24,25,26], # pt 13
            [21,22,23,24,25,26], # pt 14
            [5,9], # pt 15
        ]

projections:
    # PtWeightsFile: '/home/mdicosta/alice/hf-vn/ptweights/weights/Dplus/k3050/pTweight_Dplus_k3050_test_Dplus.root'
    ApplyPtWeightsD: False
    ApplyPtWeightsB: False
    ApplyBSpeciesWeights: False
    storeML: True

preprocess:
    data:
        '2024':
            files: [
                  /home/mdicosta/YieldFitter/ppref/Trains/Train527900/AnalysisResults.root,
                # /home/mdicosta/alice/hf-vn/datasets/Data_Dplus_3050.root
            ]
    mc: Null
    mc_before_pr_dplus: True
    axes_data: {
        'Mass': 1,
        'score_bkg': 1,
        'score_FD': 1
    }
    # axes_reco: {
    #     'Mass': 1, 
    #     'Pt': 1, 
    #     'score_bkg': 1, 
    #     'score_FD': 1
    # }
    # axes_gen: {
    #     'Pt': 1, 
    #     'cent': 1
    # }
    workers: 1
    bkg_cuts: [0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2]
    # bkg_cuts: [0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2]

corr_bkgs:
    input_file: "/data/mdicosta/DplusFlow/Templates/469721/AO2DHF_LHC25e4_All.root"
    table_names: ["O2hfcanddplite"]
    sgn_fin_state: "DplusToPiKPi"
    bkg_score_column: "fMlScore0"
    fd_score_column: "fMlScore1"
    include_final_states: [
                            "DplusToPiKPiPi0",
                            "DstarD0ToPiKPi",
                            "DplusToPiKK",
                            "DplusToPiPiPi",
                            "DsToPiKK",
                            "DsToPiKKPi0",
                            # "DsToPiPiPi",
                            # "DsToPiPiK",
                            # "DsToPiPiPiPi0",
                            # "DstarD0ToPiKPi",
                            # "DstarD0ToPiKPiPi0",
                            # "DstarD0ToPiKK",
                            # "DstarD0ToPiPiPi"
                            # , "DstarD0ToPiPiPiPi0",
                            # "LcToPKPi", "LcToPKPiPi0", "LcToPPiPi", "LcToPKK",
                            # "XicToPKPi", "XicToPKK", "XicToSPiPi"
                        ]
    correct_ds_abundance: 1.25

ry_extraction:
    Sigma: [0.02] #, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02]
    MassFitRanges: [
        # [1.70, 2.05],
        # [1.70, 2.05],
        # [1.70, 2.05],
        # [1.70, 2.05],
        # [1.70, 2.05],
        # [1.70, 2.05],
        # [1.70, 2.05],
        [1.70, 1.96],
        # [1.70, 2.19],
        # [1.70, 2.19],
        # [1.66, 2.19],
        # [1.66, 2.19],
        # [1.66, 2.19],
        # [1.66, 2.19],
    ]
    IncludeCorrBkgs: True
    CorrBkgsHistoNames: ["hMassTotalCorrBkgs"]
    CorrBkgsAnchorMode: 2 # 1: Anchor to first, 2: Anchor to signal
    SgnFunc: [
        # ["gaussian"],
        # ["gaussian"],
        # ["gaussian"],
        # ["gaussian"],
        ["gaussian"],
        # ["gaussian"],
        # ["gaussian"],
        # ["gaussian"],
        # ["gaussian"],
        # ["gaussian"],
        # ["gaussian"],
        # ["gaussian"],
        # ["gaussian"],
        # ["gaussian"],
    ]
    BkgFunc: [
            #   ["chebpol2"],
            #   ["chebpol2"],
            #   ["chebpol2"],
            #   ["chebpol2"],
              ["chebpol2"],
            #   ["chebpol2"],
            #   ["chebpol2"],
            #   ["chebpol2"],
            #   ["chebpol2"],
            #   ["chebpol2"],
            #   ["chebpol2"],
            #   ["chebpol2"],
            #   ["chebpol2"],
            #   ["chebpol2"]
    ]
    FixMean: 0
    FixSigma: 0
    Rebin: 2

    #_________________________________________________________________________________________________________________________
    # Optional fit configurations, if not set, the default values will be used. If single value is provided, it will be used for all pt bins.
    #MeanFile: '' # default: ''
    #BoundMean: 0 # 0: Do not set limits on mean range, 1: the mean is set to be between MassMin[i] and MassMax[i]
    #FixSigmaFromFile: '' # default: ''
    #SigmaFile: '' # default: ''
    #SigmaMultFactor: 1. # default: 1
    #FixSigmaRatio: 0 # default: 0
    #SigmaRatioFile: "" # default: ""
    #NSigma4SB: 3 # optional
    #Rebin: 1 # optional, default: 1
    #InclSecPeak: 0 # 0: do not include secondary peak, 1: include secondary peak, default: 0
    #SigmaSecPeak: [0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02] # optional, default: []. If InclSecPeak = 1, then SigmaSecPeak must be provided.
    #SigmaFileSecPeak: '' # optional, default: ''
    #SigmaMultFactorSecPeak: 1. # optional, default: 1
    #FixSigmaToFirstPeak: 0 # 0: do not fix sigma to the first peak, 1: fix sigma to the first peak, default: 0
    #enableRef: false #reflection for D0. 
    #ReflFunc: "2gaus" # reflection function, default: "2gaus". D0 specific, not available for others
    #reflFile: ''
    # if `enableRef` is set to `true`,  and `ReflFile` is empty, then `ReflFile` will be aotumatically filled.
    # if `ReflFile` is filled, then it will use the filled one
    #__________________________________________________________________________________________________________________________
